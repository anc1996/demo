<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Hello Ming</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>
<body>

    <div id="app">
        <div><h1>{{name}}</h1></div>
        <button @click='user_login'>登录</button>
        <button @click='book'>获取图书</button>

    </div>
    <script>
        new Vue({
            el:'#app',
            data:{
                name:'',
                btitle:'',
                message:'',
                book_list:[]
            },
            methods:{
                 mounted:function(){
                 axios.get('http://127.0.0.1:8000/')
                 .then(response =>{
                     this.name=response.data.name
                })
                 .catch(error =>{
                     alert(error)
                 })
             },
                user_login:function(){
                  axios.get('http://127.0.0.1:8000/login?username=python').then(
                      response=>{
                          this.message=response.data.message
                          alert(this.message)
                      }
                  ).catch(error =>{
                        alert(error)
                    })
                },
                book:function(){
                    axios.get('http://127.0.0.1:8000/book/2/')
                    .then(response =>{
                    this.btitle=response.data.btitle
                    alert(this.btitle)
                    location.href
                })
                    .catch(error =>{
                        alert(error)
                    })
                }
            }
        })
           
    </script>
</body>
</html>